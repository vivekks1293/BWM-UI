<div class="container mt-4">
    <h2>Timetables for {{ termName }}</h2>
  
    <ul class="list-group mb-4">
      <li
        *ngFor="let timetable of timetables"
        class="list-group-item d-flex justify-content-between align-items-center"
      >
        <!-- {{ timetable.time_table_Name }} -->
        <span>
            {{ timetable.time_table_Name }}
            <span *ngIf="timetable.isChecked === true" class="custom-active-icon"></span>
        </span>
        <div>
            <button class="btn btn-outline-primary btn-sm me-2" (click)="viewAttendance(timetable.time_table_id, timetable.time_table_Name)">
                View Attendance
              </button>
        </div>
      </li>
    </ul>
    <div class="modal" tabindex="-1" [class.show]="showPopup" [ngStyle]="{ display: showPopup ? 'block' : 'none' }">
        <div class="modal-dialog modal-lg">
          <div class="modal-content">
            <div class="modal-header">
                <h2>Timetable: {{selectedTimeTableName}}</h2>
                <button type="button" class="btn-close" (click)="closePopup()"></button>
              </div>
            <div class="modal-body">
              <div class="table-responsive" style="max-height: 400px; overflow-x: auto;">
                <table class="table table-bordered">
                  <thead>
                    <tr>
                      <th class="sticky-column">Subject Name</th>
                      <th>Total Attendance</th>
                      <th>Present</th>
                      <th>Absent</th>
                      <th>Present (%)</th>
                      <th>Absent (%)</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let record of attendanceSummary">
                      <td class="sticky-column">{{ record.SubjectName }}</td>
                      <td>{{ record.TotalAttendance }}</td>
                      <td>{{ record.Present }}</td>
                      <td>{{ record.Absent }}</td>
                      <td>{{ record.PresentPercentage }}</td>
                      <td>{{ record.AbsentPercentage }}</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" (click)="closePopup()">Close</button>
            </div>
          </div>
        </div>
      </div>
  
    <div class="d-flex justify-content-end">
      <button class="btn btn-secondary me-2" (click)="goBack()">Back</button>
    </div>
  </div>
  